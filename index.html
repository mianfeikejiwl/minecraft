<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>落幕曲服务器</title>
    <meta name="keywords" content="落幕曲服务器,MC服务器,我的世界服务器,生存服务器,Java版服务器">
    <meta name="description" content="落幕曲服务器 云境之地，主打纯粹生存体验的我的世界服务器，欢迎冒险家加入！">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #00ff88; --primary-glow: rgba(0, 255, 136, 0.4); --dark: #0b0e14; --surface: rgba(20, 25, 35, 0.8); --surface-border: rgba(255, 255, 255, 0.1); --text: #ffffff; --text-dim: #a0aec0; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Noto Sans SC', sans-serif; background-color: var(--dark); color: var(--text); overflow-x: hidden; line-height: 1.6; }
        
        .bg-wrapper { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: -2; }
        .bg-img { position: absolute; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0; transition: opacity 1.5s ease; }
        .bg-img.active { opacity: 1; }
        .bg-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(11,14,20,0.5) 0%, rgba(11,14,20,0.98) 100%); z-index: -1; backdrop-filter: blur(2px); }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        
        nav { padding: 20px 0; position: fixed; width: 100%; top: 0; z-index: 100; transition: 0.3s; }
        nav.scrolled { background: rgba(11, 14, 20, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid var(--surface-border); padding: 15px 0; }
        .nav-inner { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-family: 'Rajdhani', sans-serif; font-size: 1.8rem; font-weight: 700; color: white; text-transform: uppercase; letter-spacing: 2px; text-shadow: 0 0 15px var(--primary-glow); }
        .nav-links { display: flex; gap: 30px; align-items: center; }
        .nav-link { color: var(--text-dim); text-decoration: none; font-weight: 500; transition: 0.3s; font-size: 0.95rem; }
        .nav-link:hover { color: var(--primary); }
        .btn-nav { background: var(--primary); color: #000; padding: 8px 20px; border-radius: 4px; font-weight: 700; text-decoration: none; transition: 0.3s; }
        .btn-nav:hover { box-shadow: 0 0 20px var(--primary-glow); transform: translateY(-2px); }

        .hero { min-height: 100vh; display: flex; align-items: center; padding-top: 80px; position: relative; }
        .hero-grid { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 60px; align-items: center; width: 100%; }
        .hero-text h1 { font-size: 3.5rem; line-height: 1.1; margin-bottom: 20px; background: linear-gradient(135deg, #fff 0%, #a5b4fc 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero-text p { font-size: 1.1rem; color: var(--text-dim); margin-bottom: 30px; max-width: 500px; }
        .tags { display: flex; gap: 10px; margin-bottom: 25px; flex-wrap: wrap; }
        .tag { background: rgba(255,255,255,0.1); padding: 4px 10px; border-radius: 4px; font-size: 0.8rem; color: #ccc; border: 1px solid var(--surface-border); }
        .hero-btns { display: flex; gap: 15px; flex-wrap: wrap; }
        .btn-lg { padding: 12px 30px; border-radius: 8px; font-weight: 700; cursor: pointer; border: none; font-size: 1rem; display: flex; align-items: center; gap: 10px; transition: 0.3s; text-decoration: none; }
        .btn-primary { background: var(--primary); color: #000; }
        .btn-primary:hover { box-shadow: 0 0 30px var(--primary-glow); transform: translateY(-3px); }
        .btn-outline { background: rgba(255,255,255,0.05); color: white; border: 1px solid var(--surface-border); }
        .btn-outline:hover { background: rgba(255,255,255,0.1); border-color: var(--text); }

        .server-card { background: rgba(20, 25, 35, 0.7); backdrop-filter: blur(20px); border: 1px solid var(--surface-border); border-radius: 20px; padding: 30px; transform: perspective(1000px) rotateY(-5deg); transition: transform 0.5s ease; box-shadow: 0 20px 50px rgba(0,0,0,0.5); position: relative; overflow: hidden; width: 100%; }
        .server-card:hover { transform: perspective(1000px) rotateY(0deg) translateY(-10px); }
        .card-header { display: flex; align-items: center; gap: 20px; margin-bottom: 20px; }
        .server-icon { width: 70px; height: 70px; border-radius: 15px; background: #000; object-fit: cover; border: 2px solid var(--surface-border); }
        .status-badge { display: inline-block; padding: 4px 10px; background: rgba(0, 255, 136, 0.1); color: var(--primary); border-radius: 20px; font-size: 0.8rem; font-weight: 700; border: 1px solid rgba(0, 255, 136, 0.2); }
        
        .server-motd { background: rgba(0,0,0,0.2); padding: 10px; border-radius: 8px; margin-bottom: 20px; font-size: 0.9rem; color: #ccc; border: 1px solid rgba(255,255,255,0.05); min-height: 40px; display: flex; align-items: center; justify-content: center; text-align: center; line-height: 1.4; }

        .ip-box { background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; cursor: pointer; border: 1px solid transparent; transition: 0.3s; }
        .ip-box:hover { border-color: var(--primary); background: rgba(0,0,0,0.5); }
        .ip-label { font-size: 0.75rem; color: #888; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 2px; }
        .ip-addr { font-family: 'Rajdhani', monospace; font-size: 1.1rem; letter-spacing: 1px; font-weight: 700; }
        
        .player-bar-wrap { margin-bottom: 15px; }
        .bar-info { display: flex; justify-content: space-between; font-size: 0.9rem; margin-bottom: 5px; color: var(--text-dim); }
        .progress-bg { height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 1s ease; box-shadow: 0 0 10px var(--primary); }

        .player-list-wrap { margin-top: 20px; border-top: 1px solid var(--surface-border); padding-top: 15px; }
        .player-list-title { font-size: 0.85rem; color: var(--text-dim); margin-bottom: 10px; font-weight: 700; }
        .player-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(50px, 1fr)); gap: 10px; max-height: 150px; overflow-y: auto; }
        .player-item { display: flex; flex-direction: column; align-items: center; }
        .player-head { width: 40px; height: 40px; border-radius: 8px; margin-bottom: 4px; border: 1px solid var(--surface-border); transition: 0.2s; }
        .player-item:hover .player-head { transform: scale(1.1); border-color: var(--primary); }
        .player-name { font-size: 0.7rem; color: #ccc; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; }

        .section { padding: 80px 0; }
        .section-title { text-align: center; margin-bottom: 50px; }
        .section-title h2 { font-size: 2.2rem; margin-bottom: 10px; }
        .section-title span { width: 40px; height: 3px; background: var(--primary); display: block; margin: 0 auto; }

        .gallery-scroller { display: flex; overflow-x: auto; gap: 20px; padding-bottom: 20px; scroll-snap-type: x mandatory; }
        .gallery-item { min-width: 350px; height: 220px; border-radius: 12px; overflow: hidden; scroll-snap-align: center; border: 1px solid var(--surface-border); position: relative; }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .gallery-item:hover img { transform: scale(1.1); }

        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; }
        .feature-card { background: var(--surface); padding: 30px 25px; border-radius: 15px; border: 1px solid var(--surface-border); transition: 0.3s; }
        .feature-card:hover { transform: translateY(-5px); border-color: var(--primary); }
        .f-icon { font-size: 2rem; color: var(--primary); margin-bottom: 15px; }

        .faq-item { background: var(--surface); border-radius: 10px; margin-bottom: 15px; border: 1px solid var(--surface-border); overflow: hidden; }
        .faq-head { padding: 15px 20px; cursor: pointer; display: flex; justify-content: space-between; font-weight: 700; font-size: 1rem; }
        .faq-body { padding: 0 20px; max-height: 0; overflow: hidden; transition: 0.3s ease; color: var(--text-dim); font-size: 0.9rem; }
        .faq-item.active .faq-body { padding-bottom: 20px; max-height: 300px; }
        .faq-item.active .faq-head { color: var(--primary); }
        code { background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px; color: var(--primary); font-family: monospace; }

        footer { background: #050608; padding: 40px 0; border-top: 1px solid var(--surface-border); text-align: center; margin-top: 50px; }
        .footer-links a { color: var(--text-dim); margin: 0 10px; text-decoration: none; font-size: 0.9rem; }
        .copyright { color: #555; font-size: 0.8rem; margin-top: 15px; }

        @media (max-width: 992px) { 
            .hero-grid { grid-template-columns: 1fr; text-align: center; gap: 40px; } 
            .hero-text h1 { font-size: 2.8rem; } 
            .hero-btns { justify-content: center; } 
            .server-card { width: 95%; max-width: none; margin: 0 auto; transform: none; padding: 25px; } 
            .nav-links { display: none; } 
            .tags { justify-content: center; } 
        }
    </style>
</head>
<body>

    <div class="bg-wrapper">
                    <div class="bg-img active" style="background-image: url('https://image.lolimi.cn/2026/01/06/695c41ca4e9bb.jpeg')"></div>
                    <div class="bg-img " style="background-image: url('https://image.lolimi.cn/2026/01/06/695c41ea5781a.jpeg')"></div>
            </div>
    <div class="bg-overlay"></div>

    <nav id="navbar">
        <div class="container nav-inner">
            <div class="logo">落幕曲服务器</div>
            <div class="nav-links">
                <a href="#gallery" class="nav-link">相册</a>
                <a href="#features" class="nav-link">特色</a>
                <a href="#faq" class="nav-link">指南</a>
                <a href="#download" class="nav-link">下载</a>
                <a href="https://qun.qq.com/universal-share/share?ac=1&authKey=XfhrHHHP6FcBjkwZQUWlj4SI%2FVdKCS9uEIkR2A7Lo%2BEtiyLrgna4d9jL6uQ%2FqXHE&busi_data=eyJncm91cENvZGUiOiIxMDcyMjI0NzgzIiwidG9rZW4iOiJqRTFHT00yaVlvdjU5Y0ZGZytjR3lSekFzUFBqOEQrSGMrdUF4M0ZwKy9ndVErUDFCVzNyNUdxWk5veVd4MHgzIiwidWluIjoiMzQ5ODk0OTU4MyJ9&data=mXr7hSWE7mDqNxLKrfaGqjEQrEMMyBLh930z2Fm8gtUnni8Czkxgk-V_2PQoi_1FjCVbF5z4bket39ceMditrQ&svctype=4&tempid=h5_group_info" target="_blank" class="btn-nav">加入QQ群</a>
            </div>
        </div>
    </nav>

    <div class="hero">
        <div class="container hero-grid">
            <div class="hero-text">
                <h1>无尽冒险<br>始于足下</h1>
                <div class="tags">
                    <span class="tag">支持正版和离线版游玩</span>
                </div>
                <p>云境之地 - 落幕曲</p>
                <div class="hero-btns">
                    <a href="#faq" class="btn-lg btn-outline">
                        <i class="fas fa-terminal"></i> 新手指南
                    </a>
                </div>
            </div>
            <div class="server-card">
                <div class="card-header">
                    <img src="" id="server-icon" class="server-icon" alt="Icon">
                    <div class="server-info">
                        <h3>落幕曲服务器</h3>
                        <span class="status-badge" id="status-text">检测中...</span>
                    </div>
                </div>

                <div class="server-motd" id="server-motd">
                    正在获取服务器简介...
                </div>

                <div id="ip-java" class="ip-box" onclick="copyText('mc.cnmbsb.vip:21294', this)">
                    <div>
                        <div class="ip-label">服务器地址 (点击复制)</div>
                        <div class="ip-addr">mc.cnmbsb.vip:21294</div>
                    </div>
                    <i class="far fa-copy" style="color: var(--primary);"></i>
                </div>

                <div class="player-bar-wrap">
                    <div class="bar-info">
                        <span>在线人数</span>
                        <span id="player-count">--/--</span>
                    </div>
                    <div class="progress-bg">
                        <div class="progress-fill" id="player-bar"></div>
                    </div>
                </div>
                <div style="font-size: 0.85rem; color: #666; text-align: center; margin-bottom: 10px;">
                    版本: <span id="ver-text">Loading...</span>
                </div>

                <div class="player-list-wrap" id="player-list-section" style="display:none;">
                    <div class="player-list-title">在线玩家列表</div>
                    <div class="player-grid" id="player-grid"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="section" id="gallery" style="background: rgba(0,0,0,0.2);">
        <div class="container">
            <div class="section-title">
                <h2>精彩瞬间</h2>
                <span></span>
            </div>
            <div class="gallery-scroller">
                                    <div class="gallery-item">
                        <img src="https://image.lolimi.cn/2026/01/06/695c3de5173ed.jpeg" loading="lazy" alt="Gallery">
                    </div>
                                    <div class="gallery-item">
                        <img src="https://image.lolimi.cn/2026/01/06/695c3dfb0a18c.jpeg" loading="lazy" alt="Gallery">
                    </div>
                                    <div class="gallery-item">
                        <img src="https://image.lolimi.cn/2026/01/06/695c3e88d01bf.jpeg" loading="lazy" alt="Gallery">
                    </div>
                            </div>
        </div>
    </div>

<div class="section" id="features">
    <div class="container">
        <div class="section-title">
            <h2>玩法特色</h2>
            <span></span>
        </div>
        <div class="features-grid">
            <div class="feature-card">
                <i class="fas fa-sword f-icon"></i>
                <h3>拔刀剑深度养成</h3>
                <p>收录数十款风格迥异的拔刀剑，支持锻造强化、刀魂觉醒与专属奥义释放。从基础的铁刀到传说中的妖刀，每把刀剑都有独特成长线，击杀怪物积累刀魂值，解锁瞬移、剑气斩等强力技能。</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-gun f-icon"></i>
                <h3>枪械改装作战体系</h3>
                <p>覆盖现代手枪、步枪、狙击枪及科幻能量武器，支持多维度配件改装。瞄准镜提升精准度、消音器实现隐蔽击杀、扩容弹匣增加续航，枪械弹药需通过挖矿熔炼、地牢探索获取材料制作。</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-scroll f-icon"></i>
                <h3>FTB沉浸式任务系统</h3>
                <p>以破解"七宗罪诅咒"为主线，串联起村民委托、地牢探险、Boss讨伐等丰富支线任务。新手开局即可领取任务书，跟随指引解锁基础武器与生存物资。</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-fairy-wand-sparkles f-icon"></i>
                <h3>魔法与科技辅助玩法</h3>
                <p>融入简易元素魔法与基础工业科技，魔法侧可学习火球术、雷电术、治疗术等法术，附魔在武器上提升战力；科技侧可搭建矿物加工台、武器锻造炉，实现资源自动化处理。</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-paw f-icon"></i>
                <h3>二次元养成与坐骑系统</h3>
                <p>内置二次元角色皮肤与女仆养成系统，女仆可协助挖矿、战斗、建造，升级后解锁更多技能；同时可驯服巨龙、机甲、神话生物等多种坐骑。</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-home f-icon"></i>
                <h3>创意建筑与领地系统</h3>
                <p>提供海量二次元风格建筑模组，从和风居酒屋到未来科幻要塞，满足不同建造喜好。开启领地功能即可圈定专属区域，设置权限防止他人破坏。</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-users f-icon"></i>
                <h3>多人联机趣味玩法</h3>
                <p>支持组队开荒、擂台竞技、资源争夺等多种联机模式。组队挑战副本Boss时，队友间可共享刀魂值与弹药补给；擂台竞技可禁用模组装备，考验纯操作技巧。</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-skull f-icon"></i>
                <h3>专属Boss与副本挑战</h3>
                <p>基于整合包特色定制多款强力Boss与专属副本，从"妖刀姬"守护的刀剑冢，到"机械主宰"盘踞的科技要塞，每个副本都有独特机制与专属掉落。</p>
            </div>
        </div>
    </div>
</div>

<div class="section" id="faq">
    <div class="container" style="max-width: 800px;">
        <div class="section-title">
            <h2>新手指南</h2>
            <span></span>
        </div>

        <div class="faq-item active">
            <div class="faq-head" onclick="toggleFaq(this)">
                如何获取落幕曲整合包？ <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-body">
                <p>服务器专属落幕曲1.5.3完整版整合包已上传至官方交流群文件，玩家可加入官方QQ群，在群文件分类中找到对应版本的整合包压缩包。下载完成后，解压至我的世界启动器的版本文件夹内，选择对应版本启动即可。</p>
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-head" onclick="toggleFaq(this)">
                新手开局快速上手攻略 <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-body">
                <p>1. 进入游戏后，首先领取快捷栏中的任务书，打开后查看新手引导任务；<br>2. 熟悉核心按键操作：Alt+Y键可修改角色形象，V键释放拔刀剑瞬步技能；<br>3. 利用初始生成的小屋作为临时庇护所，夜晚切勿外出游荡。</p>
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-head" onclick="toggleFaq(this)">
                联机游玩需要注意什么？ <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-body">
                <p>1. 进服前需确保所有使用相同版本的落幕曲1.5.3整合包；<br>2. 多人组队挑战Boss时，建议分工明确；<br>3. 游玩过程中请勿随意破坏队友的建筑与资源。</p>
            </div>
        </div>
        <div class="faq-item">
            <div class="faq-head" onclick="toggleFaq(this)">
                常见问题与解决方法 <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-body">
                <p>1. 进服后模组失效/物品消失：关闭游戏，删除整合包缓存文件，重新解压整合包后再次进服；<br>2. 拔刀剑无法觉醒：检查刀魂值是否充足。</p>
            </div>
        </div>
    </div>
</div>

<div class="section" id="download" style="background: rgba(0,0,0,0.3);">
    <div class="container" style="max-width: 800px;">
        <div class="section-title">
            <h2>下载专区</h2>
            <span></span>
        </div>
        
        <div class="download-card" style="background: var(--surface); border-radius: 15px; padding: 30px; border: 1px solid var(--surface-border); text-align: center;">
            <i class="fas fa-download" style="font-size: 3rem; color: var(--primary); margin-bottom: 20px;"></i>
            <h3 style="margin-bottom: 15px;">落幕曲整合包下载</h3>
            <p style="color: var(--text-dim); margin-bottom: 25px; line-height: 1.6;">
                完整版整合包包含所有必要的模组和配置，解压后即可直接使用。建议使用HMCL、PCL2或官方启动器加载。
            </p>
            
            <div style="display: flex; flex-direction: column; gap: 15px; max-width: 400px; margin: 0 auto;">
                <a href="https://www.123865.com/s/on5lVv-frdHd" target="_blank" class="btn-lg btn-primary" style="justify-content: center; text-decoration: none;">
                    <i class="fas fa-cloud-download-alt"></i> 点击下载整合包 (123云盘)
                </a>
                
                <div style="display: flex; align-items: center; justify-content: center; gap: 10px; color: var(--text-dim); font-size: 0.9rem;">
                    <i class="fas fa-info-circle"></i>
                    <span>文件大小: 约2.1GB | 版本: 1.5.3</span>
                </div>
            </div>
            
            <div style="margin-top: 25px; padding-top: 20px; border-top: 1px solid var(--surface-border);">
                <h4 style="margin-bottom: 10px; font-size: 1rem;">安装说明</h4>
                <ol style="text-align: left; color: var(--text-dim); padding-left: 20px; font-size: 0.9rem; line-height: 1.6;">
                    <li>下载完成后解压到任意文件夹</li>
                    <li>使用HMCL/PCL2启动器，添加游戏版本选择解压的文件夹</li>
                    <li>分配至少4GB内存（推荐6-8GB）</li>
                    <li>启动游戏后，在多人游戏中添加服务器地址即可</li>
                </ol>
            </div>
        </div>
    </div>
</div>

    <footer>
        <div class="container">
            <div class="footer-links">
                <a href="https://qun.qq.com/universal-share/share?ac=1&authKey=BuTCx8fta4Xgurs7V3exhOFLdnbiRjCjuO2wQt%2Bnt3wfx7r6xvO3327%2FNEP%2F1hhE&busi_data=eyJncm91cENvZGUiOiIxMDAzNjY0MzgyIiwidG9rZW4iOiJMRFdhbHJVWVNUMUttTTB4SitFUVNtVmJkZWNrYzNBV2dMUkdxZTVsZlZHUWdtNHk3Qk5lQzdSOXFpL3JjaU5yIiwidWluIjoiMzA0MzI5MDA3MiJ9&data=onhmZb1yTj-qpJGaK-3awBARnqFwHByIRMVfIAigE88u7rL9_IofiOGhgnx2NtlnGQDljGzWNYD--AiMyNYJLA&svctype=4&tempid=h5_group_info">官方群聊</a>
            </div>
            <p class="copyright">&copy; 2025 落幕曲服务器. Powered by Paper & Geyser.</p>
        </div>
    </footer>

    <script>
        const serverConfig = {
            ip: 'mc.cnmbsb.vip',
            port: '21294'
        };
        const bgs = document.querySelectorAll('.bg-img');
        let currentBg = 0;
        if(bgs.length > 1) {
            setInterval(() => {
                bgs[currentBg].classList.remove('active');
                currentBg = (currentBg + 1) % bgs.length;
                bgs[currentBg].classList.add('active');
            }, 5000);
        }

        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            if(window.scrollY > 50) nav.classList.add('scrolled');
            else nav.classList.remove('scrolled');
        });

        function copyText(text, el) {
            navigator.clipboard.writeText(text).then(() => {
                const icon = el.querySelector('i');
                const originalClass = icon.className;
                icon.className = "fas fa-check";
                setTimeout(() => { icon.className = originalClass; }, 2000);
            });
        }

        function toggleFaq(el) { el.parentElement.classList.toggle('active'); }

        function fetchServerStatus() {
            const statusText = document.getElementById('status-text');
            const pCount = document.getElementById('player-count');
            const pBar = document.getElementById('player-bar');
            const verText = document.getElementById('ver-text');
            const motdText = document.getElementById('server-motd');
            const iconImg = document.getElementById('server-icon');
            const playerListSection = document.getElementById('player-list-section');
            const playerGrid = document.getElementById('player-grid');

            fetch(`https://api.lolimi.cn/API/amc/api?target=${serverConfig.ip}:${serverConfig.port}`)
                .then(response => response.json())
                .then(data => {
                    if(data.online) {
                        statusText.innerText = "运行中";
                        statusText.style.color = "#00ff88";
                        statusText.style.background = "rgba(0,255,136,0.1)";
                        
                        const online = data.players.online;
                        const max = data.players.max;
                        pCount.innerText = `${online} / ${max}`;
                        pBar.style.width = `${Math.min((online / max) * 100, 100)}%`;
                        
                        if(data.version) {
                            verText.innerText = data.version;
                        }

                        if(data.motd && data.motd.html) {
                            motdText.innerHTML = Array.isArray(data.motd.html) ? data.motd.html.join('<br>') : data.motd.html;
                        } else if (data.motd && data.motd.clean) {
                            motdText.innerText = Array.isArray(data.motd.clean) ? data.motd.clean.join('\n') : data.motd.clean;
                        } else {
                            motdText.innerText = "欢迎来到 落幕曲服务器";
                        }

                        if(data.server_avatar) {
                            iconImg.src = data.server_avatar;
                        }

                        if(data.players.list && data.players.list.length > 0) {
                            playerListSection.style.display = 'block';
                            playerGrid.innerHTML = '';
                            data.players.list.forEach(player => {
                                const pItem = document.createElement('div');
                                pItem.className = 'player-item';
                                pItem.innerHTML = `
                                    <img src="${player.avatar}" class="player-head" alt="${player.name}" title="${player.name}">
                                    <div class="player-name">${player.name}</div>
                                `;
                                playerGrid.appendChild(pItem);
                            });
                        } else {
                            playerListSection.style.display = 'none';
                        }

                    } else {
                        throw new Error("Server offline");
                    }
                })
                .catch(err => {
                    console.log("Server status fetch failed or offline:", err);
                    statusText.innerText = "离线/维护";
                    statusText.style.color = "#ff4444";
                    statusText.style.background = "rgba(255,68,68,0.1)";
                    pCount.innerText = "0 / 0";
                    pBar.style.width = "0%";
                    motdText.innerText = "无法连接到服务器";
                    iconImg.src = "https://api.mcsrvstat.us/icon/" + serverConfig.ip;
                });
        }

        fetchServerStatus();
    </script>
</body>
</html>
